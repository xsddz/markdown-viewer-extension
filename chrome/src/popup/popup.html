<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown Viewer</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="tab-wrapper">
    <div class="header">
      <div class="header-content">
        <img src="../../icons/icon48.png" alt="Logo" class="logo">
        <div class="header-text">
          <h1 data-i18n="popup_title" id="extension-title" class="clickable-title">Markdown Viewer</h1>
          <div class="version-row">
            <span class="version"><span data-i18n="popup_version_label" id="version-text">Version</span> ¬∑ <a href="https://x.com/xicilion" target="_blank" class="author">@xicilion</a></span>
            <a href="#" id="review-link" class="review-link" title="Rate & Review">
              <span class="star-icon">‚≠ê</span>
              <span data-i18n="popup_review_link">Rate</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="tabs">
      <button class="tab active" data-tab="history" data-i18n="tab_history"></button>
      <button class="tab" data-tab="cache" data-i18n="tab_cache"></button>
      <button class="tab" data-tab="settings" data-i18n="tab_settings"></button>
    </div>

    <div class="tab-content">
      <!-- History tab (merged with overview) -->
      <div class="tab-panel active" id="history">
        <!-- File access warning (only shown when permission is disabled) -->
        <div id="file-access-warning" class="warning-box" style="display: none;">
          <div class="warning-dot"></div>
          <div class="warning-content">
            <div class="warning-title" data-i18n="file_access_disabled"></div>
            <div class="warning-desc" id="file-access-warning-desc"></div>
          </div>
        </div>

        <!-- History list -->
        <div class="info-section">
          <h3 data-i18n="history_title"></h3>
          <div class="settings-note" style="margin-bottom: 10px;" data-i18n="history_description"></div>
          
          <div class="cache-items" id="history-items" data-empty="true">
            <div class="cache-item cache-item--empty">
              <div class="empty-state-icon">üïí</div>
              <div data-i18n="history_items_empty"></div>
            </div>
          </div>

          <div class="cache-actions">
            <button class="btn" id="refresh-history" data-i18n="history_refresh"></button>
            <button class="btn danger" id="clear-history" data-i18n="history_clear"></button>
          </div>
        </div>
      </div>
      <template id="history-item-template">
        <div class="cache-item history-item" data-cache-item="dynamic">
          <div class="cache-item-key history-item-url"></div>
          <div class="cache-item-info">
            <span class="history-item-title"></span>
          </div>
          <div class="cache-item-meta history-item-accessed"></div>
        </div>
      </template>
      <template id="clipboard-item-template">
        <div class="cache-item clipboard-item" data-cache-item="dynamic">
          <div class="clipboard-item-header">
            <span class="clipboard-icon">üìã</span>
            <span class="clipboard-item-title"></span>
          </div>
          <div class="clipboard-item-preview"></div>
        </div>
      </template>

      <!-- Cache tab -->
      <div class="tab-panel" id="cache">
        <div id="cache-content">
          <div class="cache-stats" id="cache-stats">
            <div class="stat-item">
              <div class="stat-value" id="cache-stat-item-count">--</div>
              <div class="stat-label" data-i18n="cache_stat_item_label"></div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="cache-stat-size">--</div>
              <div class="stat-label" data-i18n="cache_stat_size_label"></div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="cache-stat-usage">--</div>
              <div class="stat-label" data-i18n="cache_stat_usage_label"></div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="cache-stat-capacity">--</div>
              <div class="stat-label" data-i18n="cache_stat_capacity_label"></div>
            </div>
          </div>

          <div class="cache-message" id="cache-message" hidden>
            <div class="cache-message-text" id="cache-message-text"></div>
            <div class="cache-message-details" id="cache-message-details"></div>
          </div>

          <div class="cache-actions">
            <button class="btn" id="refresh-cache" data-i18n="cache_refresh"></button>
            <button class="btn danger" id="clear-cache" data-i18n="cache_clear"></button>
          </div>

          <div class="info-section">
            <h3 data-i18n="cache_items_title"></h3>
            <div class="cache-items" id="cache-items" data-empty="true">
              <div class="cache-item cache-item--empty">
                <div class="empty-state-icon">üì¶</div>
                <div data-i18n="cache_items_empty"></div>
              </div>
            </div>
          </div>
        </div>
        <template id="cache-item-template">
          <div class="cache-item" data-cache-item="dynamic">
            <div class="cache-item-key"></div>
            <div class="cache-item-info">
              <span class="cache-item-type"></span>
              <span class="cache-item-size"></span>
            </div>
            <div class="cache-item-meta cache-item-created"></div>
            <div class="cache-item-meta cache-item-accessed"></div>
          </div>
        </template>
      </div>

      <!-- Settings tab -->
      <div class="tab-panel" id="settings">
        <div class="info-section">
          <h3 data-i18n="settings_interface_title">ÁïåÈù¢ËÆæÁΩÆ</h3>
          <div style="margin: 10px 0;">
            <label for="theme-selector" data-i18n="settings_theme_label">Select Theme</label>
            <select id="theme-selector">
              <option value="default">Loading themes...</option>
            </select>
            <div id="theme-description" class="settings-note"></div>
          </div>

          <div style="margin: 10px 0;">
            <label for="interface-language" data-i18n="settings_language_label"></label>
            <select id="interface-language">
              <option value="auto" data-i18n="settings_language_auto"></option>
            </select>
            <div class="settings-note" data-i18n="settings_language_note"></div>
          </div>
        </div>

        <div class="info-section">
          <h3 data-i18n="settings_general_title"></h3>

          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="auto-refresh-enabled" checked>
              <span data-i18n="settings_auto_refresh">Auto Refresh</span>
            </label>
            <div class="settings-note" data-i18n="settings_auto_refresh_note">Automatically reload when local file changes</div>
          </div>

          <div style="margin: 10px 0;">
            <label for="auto-refresh-interval" data-i18n="settings_auto_refresh_interval">Refresh Interval</label>
            <select id="auto-refresh-interval">
              <option value="500">0.5s</option>
              <option value="1000" selected>1s</option>
              <option value="2000">2s</option>
              <option value="5000">5s</option>
            </select>
          </div>

          <div style="margin: 10px 0;">
            <label for="frontmatter-display" data-i18n="settings_frontmatter_display"></label>
            <select id="frontmatter-display">
              <option value="hide" selected data-i18n="settings_frontmatter_hide">Hide</option>
              <option value="table" data-i18n="settings_frontmatter_table">Table</option>
              <option value="raw" data-i18n="settings_frontmatter_raw">Raw (blockquote)</option>
            </select>
            <div class="settings-note" data-i18n="settings_frontmatter_note"></div>
          </div>

          <div style="margin: 10px 0;">
            <label for="docx-emoji-style" data-i18n="settings_docx_emoji_style"></label>
            <select id="docx-emoji-style">
              <option value="system" selected data-i18n="settings_docx_emoji_style_system">System style</option>
              <option value="windows" data-i18n="settings_docx_emoji_style_windows">Windows style</option>
              <option value="apple" data-i18n="settings_docx_emoji_style_apple">Apple style</option>
            </select>
            <div class="settings-note" data-i18n="settings_docx_emoji_style_note"></div>
          </div>

          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="table-merge-empty" checked>
              <span data-i18n="settings_table_merge_empty"></span>
            </label>
            <div class="settings-note" data-i18n="settings_table_merge_empty_note"></div>
          </div>

          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="docx-hr-page-break">
              <span data-i18n="settings_docx_hr_page_break"></span>
            </label>
            <div class="settings-note" data-i18n="settings_docx_hr_page_break_note"></div>
          </div>

          <div style="margin: 10px 0;">
            <label for="max-cache-items" data-i18n="settings_max_cache_label"></label>
            <select id="max-cache-items">
              <option value="100">100</option>
              <option value="200">200</option>
              <option value="500">500</option>
              <option value="1000">1000</option>
              <option value="2000">2000</option>
              <option value="5000">5000</option>
            </select>
          </div>
        </div>

        <div class="info-section">
          <h3 data-i18n="settings_supported_formats_title"></h3>
          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="support-mermaid">
              <span data-i18n="settings_support_mermaid"></span>
            </label>
          </div>

          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="support-vega">
              <span data-i18n="settings_support_vega"></span>
            </label>
          </div>

          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="support-vega-lite">
              <span data-i18n="settings_support_vega_lite"></span>
            </label>
          </div>

          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="support-dot">
              <span data-i18n="settings_support_dot"></span>
            </label>
          </div>

          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="support-infographic">
              <span data-i18n="settings_support_infographic"></span>
            </label>
          </div>

          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="support-canvas">
              <span data-i18n="settings_support_canvas"></span>
            </label>
          </div>

          <div style="margin: 10px 0;">
            <label class="checkbox-label">
              <input type="checkbox" id="support-drawio">
              <span data-i18n="settings_support_drawio"></span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Dialog -->
    <div id="confirm-modal" class="modal-overlay" style="display: none;">
      <div class="modal-content">
        <h3 class="modal-title" id="modal-title">Confirm</h3>
        <p class="modal-message" id="modal-message">Are you sure?</p>
        <div class="modal-actions">
          <button class="btn" id="modal-cancel">Cancel</button>
          <button class="btn danger" id="modal-confirm">Confirm</button>
        </div>
      </div>
    </div>

    <script src="popup.js"></script>
</body>

</html>